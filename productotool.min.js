var o,e;1!=window.pulsado&&(window.versionPlugin="Plugin v93",window.chks=0,window.loc=location.origin,window.webActual=loc+location.pathname,window.ttl=document.title,document.title=versionPlugin,window.qs=function(o){return document.querySelector(o)},window.qsa=function(o){return document.querySelectorAll(o)},window.dameToken=function(){return $('meta[name="csrf-token"]').attr("content")},window.dameUserHash=async function(){var o=await cookieStore.get("userHash");return o?o.value:null},window.dameToken=async function(){var o=await cookieStore.get("token");return o?o.value:null},window.mostrarCaducidadLoginReservas=async function(){var o;chks%10==0&&((o=await(await fetch(loc+"/web/profile/myproducts")).text()).includes("Mi Perfil")?(o=o.split('id="res-').length-1,qs(".header").textContent="Tiene "+o+" reservas"):(qs(".header").textContent="NO hay sesi√≥n",console.log("no hay sesion")))},qs(".es-iam-menu-ppal-button:first-child").innerText="ReMAD "+versionPlugin),textoCaducaHoy=" (Caduca hoy)",1!=window.pulsado&&(window.tituloProducto=qs(".bigCard-title"),window.existeBotonReservar=qs("#boton-autoreservar"),window.contenedorBotones=qs(".card-actions"),o=null!=qs(".reservar-btn"),tituloProducto)&&!existeBotonReservar&&(window.reservableAlInicio=o,window.timeoutNormal=350,window.timeoutLento=750,window.timeoutRapido=150,window.modo=window.timeoutLento,window.deboComprobarSiCaducaHoy=!1,window.textoTituloProducto=tituloProducto?tituloProducto.textContent:"#producto#",reservableAlInicio&&((o=document.createElement("div")).className="_ngcontent-mia-c44",window.contenedorBotones.append(o),(e=document.createElement("button")).className="reservar-btn",e.id="boton-autoreservar",e.innerText="Reservar (sin SMS)",e.style="background-color: #e94e1b; color: #fff; border: none; border-radius: 20px; padding: 10px 20px; font-size: 16px; cursor: pointer;",o.append(e),e.addEventListener("click",async function(){var o=await window.dameUserHash(),e=await window.dameToken(),t=location.hash.split("/").pop(),o=await(await fetch("https://remad.madrid.es/REMAD_RSP/api/v1/reservations?userHash="+o,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer "+e},method:"POST",body:JSON.stringify({antiquity:{hash:t}})})).json();alert(o.code),location.reload()})),window.pulsado=!0);