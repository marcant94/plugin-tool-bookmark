window.agregarBotonera=function(){replicarNodo(qs("#btn-show-more"));let e=qs("#btn-show-more");e.innerText="Ver "+limiteReducido+" Más";e.addEventListener("click",verArticulos.bind(this,limiteReducido));let t=e.cloneNode(true);t.innerText="Ver "+limiteAmpliado+" Más";t.id="btn-show-much-more";t.addEventListener("click",verArticulos.bind(this,limiteAmpliado));e.parentNode.append(t);let o=qs("#available").parentNode;o.className="form-group col-xs-6 col-md-2";replicarNodo(o);o=qs("#available").parentNode;o.querySelector("label").htmlFor="available";let l=document.createElement("div");l.className="form-group col-xs-6 col-md-2";o.parentNode.append(l);let a=document.createElement("span");a.className="btn btn-outline";a.innerText="Buscar "+limiteReducido;l.append(a);a.addEventListener("click",reemplazarDisponibles.bind(this,limiteReducido));let r=document.createElement("div");r.className="form-group col-xs-6 col-md-2";o.parentNode.append(r);let i=document.createElement("span");i.className="btn btn-outline";i.innerText="Buscar Todo";r.append(i);i.addEventListener("click",reemplazarDisponibles.bind(this,0));let n=qs("#plf").parentNode;replicarNodo(n);let s=qs("#category").parentNode;qs("#category").style.display=null;bsmultiselect=qs(".dashboardcode-bsmultiselect");if(bsmultiselect){bsmultiselect.remove()}opciontodos=qs("#category option[value='all']");if(opciontodos){opciontodos.remove()}replicarNodo(s.parentNode);qs("#category option[value='home']").selected=true;qs("#category option[value='child']").selected=true;qs("#category option[value='sport']").selected=true;$("#category.form-control").bsMultiSelect();qs("#home").remove();qs("#child").remove();qs("#sport").remove();let c=o.cloneNode(true);let d=c.querySelector("input");d.name="caducahoy";d.id="caducahoy";d.checked=false;let u=c.querySelector("label");u.textContent="Caducan hoy:";u.htmlFor="caducahoy";o.parentNode.append(c);$("#caducahoy").on("click",fncFiltrarCaducanHoy);let p=o.cloneNode(true);let m=p.querySelector("input");m.name="invertir";m.id="invertir";m.checked=false;let b=p.querySelector("label");b.textContent="Orden inverso:";b.htmlFor="invertir";o.parentNode.append(p);$("#invertir").on("click",fncInvertirOrden);let v=document.createElement("div");v.className="form-group col-xs-6 col-md-2";o.parentNode.append(v);let f=document.createElement("span");f.className="btn btn-outline";f.id="boton-auto-actualizar";f.innerText="Autoactualizar";v.append(f);f.addEventListener("click",iniciarAutoActualizar);let h=document.createElement("style");h.innerHTML=`#results{display:flex;flex-direction:row;flex-wrap:wrap;}
#results.invertir{flex-direction:row-reverse;flex-wrap:wrap-reverse;}
#results>div{display:block;flex-basis:33%;position:relative;padding:15px;}
#results .reservado form button[type='submit']{background-color:#18bc9c;pointer-events:none;}
#results .reservado>div{border:2px dashed #18bc9c;}
#results .perdido form button[type='submit']{background-color:black;pointer-events:none;}
#results .perdido>div{border:2px dashed black;}
.bloqueado {border:2px dashed silver;color:silver;pointer-events:none;}
@media only screen and (max-width:1000px){#results>div{flex-basis:50%;padding:5px;}}
@media only screen and (max-width:768px){#results>div{flex-basis:100%;padding:2px;}}`;document.getElementsByTagName("head")[0].appendChild(h)};window.borrarResultados=function(){let t=qsa("#results>div");for(let e=0;e<t.length;e++){t[e].remove()}let e=qs("#caducahoy");if(e&&e!=null){e.checked=false}let o=qs("#invertir");if(o&&o!=null){o.checked=false}};window.reemplazarDisponibles=function(e){borrarResultados();verArticulos(e)};window.iniciarAutoActualizar=async function(){qs("#boton-auto-actualizar").classList.add("bloqueado");comprobarReservaCatalogo()};window.comprobarReservaCatalogo=async function(){let t=webActual;let o=false;let e=qs("#plf").value;if(e!="none"&&e>0){if(o){t+="&"}else{o=true;t+="?"}t+="plf_id="+e}let l=qsa("#category option");l.forEach(e=>{if(e.selected){if(o){t+="&"}else{o=true;t+="?"}t+="category="+e.value;t+="&"+e.value+"=on"}});let a=qs("#available").checked;if(a==true){if(o){t+="&"}else{o=true;t+="?"}t+="available="+a}let r=await fetch(t);let i=await r.text();let n=i.indexOf("antiquity/favorite");let s=i.substring(0,n);comprobarLogin(s);let c=s.includes("Reservar");let d=i.substring(n+19);let u=parseInt(d.substring(0,d.indexOf('" method="POST"')));chks++;if(c&&u>idPrimerArticulo){idPrimerArticulo=u;let e=i.indexOf('<div class="row" id="results">');let t=i.indexOf('<div class="row">',e+30);let o=i.substring(e,t);let l=qs("#invertir");if(l&&l!=null){l.checked=false}qs("#results").outerHTML=o;setTimeout(comprobarReservaCatalogo,timeout)}else{try{tituloCatalogo=qs(".container .row h1");tituloCatalogo.textContent=textoTituloCatalogo+" - "+chks}catch(e){}try{document.title=ttl+" "+chks}catch(e){}setTimeout(comprobarReservaCatalogo,timeout)}};if(window.pulsado!=true){resultadosCatalogo=qs("#results");if(resultadosCatalogo){textoTituloCatalogo=qs(".container .row h1").textContent;if(qs("#caducahoy")==null){agregarBotonera()}reemplazarDisponibles(limiteReducido);window.pulsado=true}}